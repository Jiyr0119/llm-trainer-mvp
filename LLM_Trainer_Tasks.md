# 项目任务与进度跟踪文档（LLM Trainer MVP）

目的：基于《LLM_Trainer_MVP.md》将目标拆解为可执行任务，提供跨前后端的一体化计划、状态与问题跟踪机制。

—

1. 使用与约定
- 状态枚举：未开始 | 进行中 | 已完成 | 阻塞
- 优先级：高 | 中 | 低
- 时间单位：h（小时）/ d（天），均为工作量预估（不含等待/评审时间）
- 统一更新流程：
  - 修改任务状态/耗时 → 在“9. 进度更新”追加一条记录 → 若遇阻，在“10. 问题记录与处理”登记
- 负责人命名：Owner-FE / Owner-BE（默认：Jonathan，可后续调整）

—

2. 任务总览与依赖
- 依赖关系（箭头表示依赖于）：
  - T-02 → T-01
  - T-03 → T-02
  - T-04 → T-03
  - T-05 → T-03
  - T-06 → T-03, T-05
  - T-07 → T-02
  - T-08 → T-02
  - T-09 → T-02, T-03, T-05
  - T-10 → T-06, T-07, T-08, T-09

—

3. 任务清单（每项含前后端内容）

T-01 项目基线初始化（FE/BE）
- 目标：前端基础工程（Vue3+Vite+ElementPlus+Router）；后端 FastAPI 骨架与健康检查
- 前端：项目结构、路由/导航、代理配置、基础页面可达
- 后端：FastAPI 启动、根路由/健康检查、基础依赖安装
- 依赖：无
- 优先级：高
- 预计耗时：FE 8h，BE 6h
- 状态：已完成
- 负责人：Owner-FE Jonathan | Owner-BE Jonathan
- 技术重点：
  - 前端：Vue3 组合式API、Vite构建工具、ElementPlus组件库、Vue Router路由管理
  - 后端：FastAPI框架、ASGI服务器、依赖注入系统、路径操作装饰器
- 学习路线：
  - 前端：Vue3基础 → Vite配置 → ElementPlus组件 → 路由设计
  - 后端：Python基础 → FastAPI入门 → 路由与依赖 → 中间件配置

T-02 API 基线与契约（FE/BE）
- 目标：对外接口定义与Schema统一，形成稳定契约
- 前端：统一 axios 封装（baseURL、拦截器、错误处理）、服务方法签名与Mock对齐
- 后端：Pydantic 模型（请求/响应）、OpenAPI 示例、接口原型（/upload, /train, /train/status, /train/stop, /predict）
- 依赖：T-01
- 优先级：高
- 预计耗时：FE 8h，BE 12h
- 状态：已完成
- 负责人：Owner-FE Jonathan | Owner-BE Jonathan
- 技术重点：
  - 前端：Axios拦截器、请求/响应处理、统一错误处理、API服务封装
  - 后端：Pydantic数据验证、FastAPI路由定义、请求/响应模型、OpenAPI文档
- 学习路线：
  - 前端：HTTP基础 → Axios配置 → 拦截器模式 → 统一错误处理
  - 后端：Pydantic基础 → 数据验证 → FastAPI路由 → OpenAPI规范

T-03 数据库接入与数据模型（FE/BE）
- 目标：SQLite + ORM（SQLModel/SQLAlchemy），完成 Dataset/TrainingJob/ModelArtifact 模型与仓储
- 前端：数据列表/详情展示（datasets/jobs），错误与加载态处理
- 后端：ORM 初始化、迁移（可选 Alembic）、Repository 层与会话管理
- 依赖：T-02
- 优先级：高
- 预计耗时：FE 8h，BE 16h
- 状态：已完成
- 负责人：Owner-FE Jonathan | Owner-BE Jonathan
- 技术重点：
  - 前端：数据表格组件、分页处理、加载状态管理、错误边界处理
  - 后端：SQLModel/SQLAlchemy ORM、数据库会话管理、模型关系定义、查询构建
- 学习路线：
  - 前端：状态管理 → 表格组件 → 异步数据加载 → 错误处理
  - 后端：SQLModel基础 → ORM模型定义 → 关系映射 → 会话与事务

T-04 上传与数据集管理（FE/BE）
- 目标：CSV 上传、校验、持久化与列表/预览
- 前端：上传表单与进度、结果提示、列表页与分页筛选
- 后端：multipart 处理、存储策略、校验与错误码、查询接口（分页/过滤）
- 依赖：T-03
- 优先级：高
- 预计耗时：FE 10h，BE 12h
- 状态：已完成
- 负责人：Owner-FE Jonathan | Owner-BE Jonathan
- 技术重点：
  - 前端：文件上传组件、进度条实现、文件类型验证、预览功能
  - 后端：文件上传处理、CSV解析与验证、文件存储管理、数据预览API
- 学习路线：
  - 前端：文件API → 上传组件 → 进度监控 → 预览渲染
  - 后端：文件处理 → CSV解析 → 数据验证 → 存储策略

T-05 训练作业管理与状态持久化（FE/BE）
- 目标：训练参数、启动/停止、状态轮询、日志采集与持久化
- 前端：训练面板（参数表单、进度条、日志区域）、轮询与取消
- 后端：背景任务（BackgroundTasks/Celery 二选一）、状态机（Pending/Running/Succeeded/Failed/Stopped）、日志落盘与查询
- 依赖：T-03
- 优先级：高
- 预计耗时：FE 12h，BE 20h
- 状态：已完成
- 负责人：Owner-FE Jonathan | Owner-BE Jonathan
- 技术重点：
  - 前端：轮询机制、实时日志展示、进度条更新、训练参数表单
  - 后端：后台任务处理、状态机实现、日志收集与存储、训练任务管理
- 学习路线：
  - 前端：表单验证 → 轮询设计 → 实时更新 → 任务取消
  - 后端：后台任务 → PyTorch训练 → 状态管理 → 日志系统

T-06 推理服务与前端集成（FE/BE）
- 目标：选择小模型/Mock → 接通真实推理 → 前端输入/结果展示
- 前端：推理输入表单、loading/错误提示与结果区域、历史记录（可选）
- 后端：/predict 接口实现、模型加载与缓存、超时与并发保护
- 依赖：T-03, T-05
- 优先级：中
- 预计耗时：FE 8h，BE 12h
- 状态：已完成
- 负责人：Owner-FE Jonathan | Owner-BE Jonathan
- 技术重点：
  - 前端：推理表单设计、结果可视化、加载状态管理、历史记录存储
  - 后端：模型缓存机制、推理接口实现、并发控制、超时处理
- 学习路线：
  - 前端：表单设计 → 异步请求 → 结果展示 → 本地存储
  - 后端：模型加载 → 推理实现 → 缓存设计 → 并发控制

T-07 统一异常与日志（FE/BE）
- 目标：统一响应结构与错误码，前端统一提示；后端标准化日志
- 前端：错误拦截、全局提示（Message/Notification）、错误页面（404/500）
- 后端：异常处理中间件、业务错误码、结构化日志（json）与请求跟踪ID
- 依赖：T-02
- 优先级：中
- 预计耗时：FE 6h，BE 10h
- 状态：已完成
- 负责人：Owner-FE Jonathan | Owner-BE Jonathan
- 技术重点：
  - 前端：全局错误处理、统一提示组件、错误页面设计、错误码映射
  - 后端：异常处理中间件、统一响应格式、结构化日志、请求跟踪
- 学习路线：
  - 前端：错误拦截 → 全局状态 → 提示组件 → 错误页面
  - 后端：中间件机制 → 异常处理 → 日志格式化 → 请求跟踪

T-08 配置管理与环境切换（FE/BE）
- 目标：.env 与 pydantic Settings；前端多环境（dev/prod/test）构建与代理
- 前端：.env.*、构建变量、代理与构建脚本调整
- 后端：Settings 类、环境变量加载、敏感信息管理
- 依赖：T-02
- 优先级：中
- 预计耗时：FE 4h，BE 6h
- 状态：已完成
- 负责人：Owner-FE Jonathan | Owner-BE Jonathan
- 技术重点：
  - 前端：环境变量配置、构建模式区分、代理设置、条件编译
  - 后端：Pydantic Settings、环境变量加载、配置验证、敏感信息处理
- 学习路线：
  - 前端：环境变量 → Vite配置 → 模式切换 → 构建优化
  - 后端：Pydantic设置 → 环境变量 → 配置验证 → 安全实践

T-09 测试与CI（FE/BE）
- 目标：单元/接口测试基线与CI流水线（GitHub Actions）
- 前端：组件/服务单测、基本覆盖率阈值（>=70%）
- 后端：pytest + httpx 接口测试、覆盖率与报告、pre-commit（可选）
- 依赖：T-02, T-03, T-05
- 优先级：中
- 预计耗时：FE 10h，BE 12h
- 状态：已完成
- 负责人：Owner-FE Jonathan | Owner-BE Jonathan
- 技术重点：
  - 前端：Vue测试库、组件测试、服务模拟、覆盖率工具
  - 后端：Pytest框架、接口测试、测试夹具、覆盖率报告
- 学习路线：
  - 前端：测试基础 → 组件测试 → 服务测试 → CI集成
  - 后端：Pytest入门 → 测试夹具 → 接口测试 → 覆盖率分析

T-10 部署与运行手册（FE/BE）
- 目标：生产可运行说明与脚本；打包与服务配置
- 前端：生产构建与静态资源部署说明
- 后端：gunicorn + uvicorn workers 配置、启动脚本、健康检查与监控探针
- 依赖：T-06, T-07, T-08, T-09
- 优先级：低
- 预计耗时：FE 4h，BE 8h
- 状态：已完成
- 负责人：Owner-FE Jonathan | Owner-BE Jonathan
- 技术重点：
  - 前端：生产构建优化、静态资源部署、CDN配置、缓存策略
  - 后端：ASGI服务器配置、进程管理、健康检查、监控集成
- 学习路线：
  - 前端：构建优化 → 资源部署 → 缓存策略 → 性能监控
  - 后端：服务器配置 → 进程管理 → 健康检查 → 监控系统

—

4. 状态跟踪与度量
- 单任务状态：按"未开始/进行中/已完成/阻塞"维护
- 里程碑进度：
  - M0 初始化：T-01（100%）
  - M1 API 基线：T-02（已完成）
  - M2 数据库与模型：T-03（已完成）
  - M3 训练作业：T-05（已完成）
  - M4 推理联通：T-06（已完成）
  - M5 质量与CI：T-07, T-08, T-09（已完成）
  - M6 部署交付：T-10（已完成）
- 时间跟踪：每次更新记录"消耗时长/剩余预估"，用于滚动修正估时

—

5. 负责人与沟通机制
- 默认负责人：Owner-FE Jonathan | Owner-BE Jonathan
- 评审节奏：
  - 日常：站会更新“9. 进度更新”
  - 里程碑：完成后做一次复盘，沉淀至“10. 问题记录与处理/经验”

—

6. 验收与质量门槛（Definition of Done）
- 代码：通过 lint 与基础测试；关键路径覆盖率达标
- 文档：接口示例与README更新；任务状态/变更日志已维护
- 运行：本地可启动端到端流程；如涉及部署，需提供可复现步骤

—

7. 风险与依赖项管理
- 关键依赖：PyTorch/Transformers 版本、NumPy 兼容、python-multipart、前后端端口与代理
- 典型风险：本地资源不足、长时任务阻塞、依赖下载失败、IPv6 回环解析
- 处理策略：小模型优先、异步/后台任务、镜像源与缓存、代理目标使用 127.0.0.1

—

8. 模板（便于快速登记）
- 任务快速卡片：
  - 标题：
  - 目标：
  - 前端工作：
  - 后端工作：
  - 依赖：
  - 优先级：高/中/低
  - 预计耗时：FE Xh，BE Yh
  - 状态：未开始/进行中/已完成/阻塞
  - 负责人：Owner-FE ，Owner-BE 
  - 备注：

—

9. 进度更新（持续追加，倒序）
- [PU-2025-09-09-001] 完成T-07统一异常与日志任务，包括前端错误码映射系统、智能错误提示、后端异常处理中间件和结构化日志。开始后端项目结构现代化重构，将API路由按模块化组织，新增服务层、数据模型层，符合现代FastAPI工程标准。
- [PU-2025-09-08-001] 完成T-10部署与运行手册任务，创建了详细的部署与运行文档，包括项目概述、系统要求、前端部署指南（Node.js安装、依赖安装、环境配置、开发与生产部署）、后端部署指南（Python环境、依赖安装、配置说明、开发与生产部署）、环境配置指南以及常见问题与故障排除部分。
- [PU-2025-09-07-001] 完成T-09测试与CI任务，为前端实现了Vue测试库和Vitest配置、组件和服务层单元测试，为后端实现了pytest测试框架、API接口测试和测试运行脚本，并配置了GitHub Actions CI流水线，确保代码质量和功能稳定性。
- [PU-2025-09-06-001] 完成T-08配置管理与环境切换任务，包括后端实现基于pydantic-settings的配置类、多环境配置文件(.env.dev/.env.test/.env.prod)、环境切换脚本，以及前端实现多环境配置(.env.development/.env.test/.env.production)、环境信息组件、环境切换脚本和npm命令。同时编写了配置管理指南文档和测试脚本。
- [PU-2025-09-05-001] 完成T-06推理服务与前端集成任务，包括后端实现/predict接口、模型加载与缓存机制、超时保护，以及前端实现推理输入表单、结果展示、加载状态提示和历史记录功能。
- [PU-2025-09-04-001] 完成T-04上传与数据集管理任务，包括前端CSV上传表单、数据集列表与预览功能，后端实现文件上传处理、数据集预览API，以及从数据集管理页面跳转到训练页面的自动选择功能。
- [PU-2025-09-03-002] 完成T-02 API基线与契约任务，包括前端统一axios封装（baseURL、拦截器、错误处理）、后端实现/train/stop接口以及前端停止训练功能。
- [PU-2025-09-03-001] 完成T-03数据库接入与数据模型任务，包括SQLite+SQLModel ORM配置、Dataset/TrainingJob/ModelArtifact模型定义、数据库会话管理以及前端数据展示功能。
- [PU-2025-09-02-001] 初始化任务板，基于 MVP 文档生成跨前后端任务清单与依赖；同步当前实际状态（T-01 完成，T-02 进行中）。

—

10. 问题记录与处理（Issue Log）
- [IS-001] 代理 ECONNREFUSED ::1:8000 → 已通过 127.0.0.1 修复（根因：IPv6 回环解析）
- [IS-002] FastAPI 上传缺少 python-multipart → 安装依赖后恢复
- [IS-003] vue-router 模块解析失败 → 安装 vue-router@^4 并修正视图导入路径

—

11. 附：对齐 MVP 的范围
- 与《LLM_Trainer_MVP.md》目标一致：上传→训练→推理→可视化与控制
- 本文档将范围映射到可执行任务，并为每个任务提供 FE/BE 双侧拆解、依赖关系、优先级与时间预估