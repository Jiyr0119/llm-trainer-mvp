# 大语言模型训练平台任务跟踪文档

## 1. 文档说明

本文档用于跟踪大语言模型训练平台项目的任务进度，结合了项目管理和技术实现细节，便于前后端协同开发和进度追踪。

## 2. 使用与约定

- **状态枚举**：未开始 | 进行中 | 已完成 | 阻塞
- **优先级**：高 | 中 | 低
- **时间单位**：h（小时）/ d（天），均为工作量预估（不含等待/评审时间）
- **更新流程**：
  - 修改任务状态/耗时 → 在"9. 进度更新"追加一条记录 → 若遇阻，在"10. 问题记录与处理"登记
- **负责人命名**：Owner-FE / Owner-BE（默认：Jonathan，可后续调整）

## 3. 项目概述与当前进度

### 3.1 项目概述

大语言模型训练平台是一个基于Web的系统，旨在帮助研究人员和开发者方便地进行模型训练、调优和部署。

### 3.2 已完成功能

1. **基础架构搭建**
   - 前端：Vue 3 + Element Plus 基础框架
   - 后端：FastAPI + PostgreSQL 基础架构
   - 用户认证系统（登录、注册）

2. **数据集管理**
   - 数据集上传功能
   - 数据集列表查看
   - 数据集预览功能

3. **训练系统**
   - 基础训练配置界面
   - 训练任务创建和状态查询API

### 3.3 待完成功能

根据PRD文档，以下是待完成的主要功能模块：

1. **数据集管理系统完善**
   - 数据集预处理功能
   - 数据集版本管理

2. **模型训练系统完善**
   - 训练过程可视化监控
   - 训练日志实时查看
   - 训练任务队列管理

3. **模型评估系统**
   - 自动化评估指标计算
   - 自定义测试集评估
   - 结果可视化展示

4. **模型管理系统**
   - 模型版本控制
   - 模型导出与部署

5. **本地语言模型对话功能** (新增)
   - 本地模型加载与推理
   - 对话界面与历史记录
   - 参数调整与模型切换

## 4. 任务总览与依赖关系

- 依赖关系（箭头表示依赖于）：
  - T-01 → MVP完成
  - T-02 → T-01
  - T-03 → T-01
  - T-04 → T-01, T-02
  - T-05 → T-01, T-03
  - T-06 → T-01, T-04
  - T-07 → T-01, T-05
  - T-08 → T-01, T-06, T-07
  - T-09 → T-01, T-06 (新增本地语言模型对话功能)

## 5. 任务详细拆分

### T-01 用户管理系统（FE/BE）

- **目标**：实现完整的用户注册、登录、权限管理功能
- **前端工作**：
  - 用户注册/登录页面
  - 个人信息页面
  - 权限控制组件
  - JWT处理
- **后端工作**：
  - 用户模型
  - 认证中间件
  - JWT实现
  - 权限控制系统
- **接口对接**：
  ```
  POST /api/auth/register
  POST /api/auth/login
  GET /api/auth/me
  PUT /api/auth/me
  ```
- **测试用例**：
  1. 用户注册并验证邮箱
  2. 用户登录并获取JWT
  3. 验证权限控制功能
- **验收标准**：
  - 用户可以成功注册和登录
  - 权限控制正确限制不同角色的访问
  - JWT正确处理过期和刷新
- **依赖**：MVP完成
- **优先级**：高
- **预计耗时**：FE 20h，BE 24h
- **状态**：进行中
- **负责人**：Owner-FE Jonathan | Owner-BE Jonathan
- **技术重点**：
  - 前端：JWT存储与刷新、权限路由守卫、用户状态管理
  - 后端：密码加密存储、JWT签发与验证、RBAC权限模型

### T-02 数据库升级（BE）

- **目标**：从SQLite迁移到PostgreSQL，实现更强大的数据管理
- **前端工作**：
  - 适配新的数据结构和API响应
- **后端工作**：
  - PostgreSQL配置
  - ORM适配
  - 迁移脚本
  - 数据备份与恢复
- **测试用例**：
  1. 验证数据迁移完整性
  2. 测试数据库连接池性能
  3. 验证事务处理正确性
- **验收标准**：
  - 所有数据成功迁移且完整
  - 系统性能提升明显
  - 数据库操作稳定可靠
- **依赖**：T-01
- **优先级**：高
- **预计耗时**：FE 8h，BE 24h
- **状态**：进行中
- **负责人**：Owner-FE Jonathan | Owner-BE Jonathan
- **技术重点**：
  - 前端：适配新的数据结构、处理可能的API变化
  - 后端：PostgreSQL配置、连接池管理、事务处理、数据迁移

### T-03 数据集管理增强（FE/BE）

- **目标**：增强数据集管理功能，支持更多格式、预处理和版本控制
- **前端工作**：
  - 高级上传组件
  - 数据集预览与编辑
  - 版本历史UI
- **后端工作**：
  - 多格式支持
  - 预处理管道
  - 版本控制系统
- **接口对接**：
  ```
  POST /api/datasets/{dataset_id}/preprocess
  GET /api/datasets/{dataset_id}/versions
  POST /api/datasets/{dataset_id}/versions
  GET /api/datasets/versions/{version_id}
  POST /api/datasets/versions/{version_id}/rollback
  ```
- **测试用例**：
  1. 上传包含特殊字符的数据集并进行清洗
  2. 创建数据集的多个版本并验证版本列表
  3. 测试版本回滚操作
- **验收标准**：
  - 能够成功对上传的数据集进行预处理
  - 能够为数据集创建和管理多个版本
  - 版本信息包含创建时间、变更说明等元数据
  - 支持回滚到之前的版本
- **依赖**：T-01
- **优先级**：高
- **预计耗时**：FE 24h，BE 32h
- **状态**：未开始
- **负责人**：Owner-FE Jonathan | Owner-BE Jonathan
- **技术重点**：
  - 前端：文件上传增强、数据可视化、版本比较UI
  - 后端：文件格式处理、文本预处理管道、版本控制实现

### T-04 模型训练系统增强（FE/BE）

- **目标**：支持更多预训练模型、高级超参数配置、分布式训练
- **前端工作**：
  - 模型选择器
  - 高级参数配置界面
  - 分布式训练监控
  - 模型特性展示
- **后端工作**：
  - 多模型支持
  - 参数验证
  - 分布式训练协调
- **接口对接**：
  ```
  WebSocket: /ws/training/{job_id}/metrics
  GET /api/train/queue
  POST /api/train/queue/reorder
  POST /api/train/jobs/{job_id}/priority
  ```
- **测试用例**：
  1. 启动训练任务并验证指标图表是否实时更新
  2. 提交多个训练任务并验证队列顺序
  3. 测试优先级调整功能
- **验收标准**：
  - 训练指标图表能够实时更新，延迟不超过5秒
  - 能够管理多个训练任务的执行顺序
  - 支持任务优先级调整
  - 任务调度考虑系统资源限制
- **依赖**：T-01, T-02
- **优先级**：高
- **预计耗时**：FE 28h，BE 48h
- **状态**：未开始
- **负责人**：Owner-FE Jonathan | Owner-BE Jonathan
- **技术重点**：
  - 前端：参数配置UI、实时监控、资源使用可视化、模型特性对比
  - 后端：模型加载框架、开源模型适配、分布式训练、资源管理

### T-05 模型评估系统（FE/BE）

- **目标**：实现全面的模型评估功能，包括多种指标计算和模型比较
- **前端工作**：
  - 评估指标展示
  - 模型比较界面
  - 可视化图表
  - 开源模型特性评估面板
- **后端工作**：
  - 评估指标计算
  - 测试集管理
  - 比较算法
  - 开源模型评估适配
- **接口对接**：
  ```
  POST /api/evaluation/models/{model_id}
  POST /api/evaluation/compare
  ```
- **测试用例**：
  1. 对训练完成的模型进行评估并验证指标计算
  2. 比较两个不同配置训练的模型性能
  3. 验证评估报告导出功能
- **验收标准**：
  - 支持多种评估指标的自动计算
  - 能够直观比较多个模型的性能差异
  - 评估结果可视化清晰直观
  - 评估报告可导出为多种格式
- **依赖**：T-01, T-03
- **优先级**：中
- **预计耗时**：FE 24h，BE 32h
- **状态**：未开始
- **负责人**：Owner-FE Jonathan | Owner-BE Jonathan
- **技术重点**：
  - 前端：数据可视化、比较视图、评估报告生成、开源模型评估展示
  - 后端：NLP评估指标、开源模型评估标准、批量测试、结果缓存

### T-06 模型管理系统增强（FE/BE）

- **目标**：增强模型版本管理、导出多种格式、一键部署
- **前端工作**：
  - 版本管理界面
  - 导出选项
  - 部署配置
  - 开源模型特性管理面板
- **后端工作**：
  - 版本控制
  - 格式转换
  - 部署API
  - 开源模型特殊处理
- **接口对接**：
  ```
  GET /api/models/{model_id}/versions
  POST /api/models/{model_id}/versions
  GET /api/models/versions/{version_id}
  PATCH /api/models/versions/{version_id}
  POST /api/models/{model_id}/export
  POST /api/models/{model_id}/deploy
  ```
- **测试用例**：
  1. 创建模型的多个版本并验证版本列表
  2. 导出模型为不同格式并验证文件完整性
  3. 测试本地部署功能
- **验收标准**：
  - 能够为模型创建和管理多个版本
  - 支持导出为多种常用模型格式
  - 部署选项灵活且易于配置
  - 部署状态实时可见
- **依赖**：T-01, T-04
- **优先级**：中
- **预计耗时**：FE 20h，BE 28h
- **状态**：未开始
- **负责人**：Owner-FE Jonathan | Owner-BE Jonathan
- **技术重点**：
  - 前端：版本管理UI、部署配置表单、状态监控、开源模型管理界面
  - 后端：模型版本控制、开源模型格式转换、部署脚本、模型压缩

### T-07 系统架构升级（FE/BE）

- **目标**：升级系统架构，支持水平扩展和高可用性
- **前端工作**：
  - 模块化重构
  - 状态管理优化
  - 性能提升
- **后端工作**：
  - 微服务拆分
  - 消息队列集成
  - 容器化
- **测试用例**：
  1. 验证系统在高负载下的稳定性
  2. 测试服务间通信的可靠性
  3. 验证容器化部署的一致性
- **验收标准**：
  - 系统能够水平扩展以应对增长的负载
  - 服务间通信稳定可靠
  - 容器化部署简单高效
- **依赖**：T-01, T-05
- **优先级**：中
- **预计耗时**：FE 32h，BE 48h
- **状态**：未开始
- **负责人**：Owner-FE Jonathan | Owner-BE Jonathan
- **技术重点**：
  - 前端：组件重构、状态管理、性能优化
  - 后端：微服务架构、消息队列、Docker容器化

### T-08 用户体验优化（FE/BE）

- **目标**：全面提升用户体验，包括UI美化、响应速度、错误处理
- **前端工作**：
  - UI/UX重设计
  - 响应式优化
  - 动画效果
  - 错误处理
- **后端工作**：
  - API性能优化
  - 缓存策略
  - 错误处理增强
- **测试用例**：
  1. 验证UI在不同设备上的响应式表现
  2. 测试API响应时间
  3. 验证错误处理和恢复机制
- **验收标准**：
  - UI美观且响应式，适应不同设备
  - API响应时间符合性能要求
  - 错误处理友好且有效
- **依赖**：T-01, T-06, T-07
- **优先级**：低
- **预计耗时**：FE 24h，BE 16h
- **状态**：未开始
- **负责人**：Owner-FE Jonathan | Owner-BE Jonathan
- **技术重点**：
  - 前端：UI设计系统、响应式布局、动画效果、错误边界
  - 后端：性能优化、缓存策略、错误处理模式

### T-09 本地语言模型对话功能（FE/BE）

- **目标**：实现本地语言模型的交互式对话功能，支持模型切换和参数调整
- **前端工作**：
  - 对话界面设计与实现
  - 消息历史记录与管理
  - 模型参数调整UI
  - 模型切换组件
  - 对话导出功能
- **后端工作**：
  - 本地模型加载与管理
  - 推理API实现
  - 对话历史存储
  - 参数验证与优化
  - 模型缓存机制
- **接口对接**：
  ```
  POST /api/chat/completions
  GET /api/chat/models
  GET /api/chat/conversations
  POST /api/chat/conversations
  GET /api/chat/conversations/{conversation_id}
  DELETE /api/chat/conversations/{conversation_id}
  PATCH /api/chat/models/settings
  ```
- **测试用例**：
  1. 使用不同模型进行对话并验证响应质量
  2. 测试模型参数调整对生成结果的影响
  3. 验证对话历史的保存和加载
  4. 测试长对话上下文的处理能力
- **验收标准**：
  - 能够加载并使用本地语言模型进行对话
  - 支持调整温度、最大长度等关键参数
  - 对话历史可保存、加载和导出
  - 响应时间在可接受范围内（小模型<1秒，大模型<5秒）
  - 支持至少3种主流开源模型（如Qwen、DeepSeek、Llama等）
- **依赖**：T-01, T-06
- **优先级**：高（当前优先实现）
- **预计耗时**：FE 16h，BE 24h
- **状态**：进行中
- **负责人**：Owner-FE Jonathan | Owner-BE Jonathan
- **技术重点**：
  - 前端：流式响应处理、Markdown渲染、代码高亮、对话状态管理
  - 后端：模型量化加载、CUDA优化、上下文管理、流式生成、内存优化

## 6. 状态跟踪与度量

- **单任务状态**：按"未开始/进行中/已完成/阻塞"维护
- **里程碑进度**：
  - M1 用户系统：T-01（10%）
  - M2 数据基础：T-02, T-03（5%）
  - M3 训练增强：T-04（0%）
  - M4 评估系统：T-05（0%）
  - M5 模型管理：T-06（0%）
  - M6 架构升级：T-07（0%）
  - M7 体验优化：T-08（0%）
  - M8 本地对话：T-09（15%）
- **时间跟踪**：每次更新记录"消耗时长/剩余预估"，用于滚动修正估时

## 7. 验收与质量门槛

- **代码**：通过 lint 与基础测试；关键路径覆盖率达标
- **文档**：接口示例与README更新；任务状态/变更日志已维护
- **运行**：本地可启动端到端流程；如涉及部署，需提供可复现步骤
- **功能完整性**：实现所有PRD中定义的功能需求
- **性能要求**：符合PRD中定义的性能指标
  - 支持同时处理多个训练任务
  - 训练监控延迟不超过5秒
  - 页面响应时间不超过2秒
- **可用性**：系统操作流程符合用户习惯，界面友好直观
- **稳定性**：系统在各种条件下稳定运行，错误处理得当
- **安全性**：用户数据和模型安全，权限控制有效

## 8. 风险与依赖项管理

- **关键依赖**：PostgreSQL迁移、分布式训练资源、微服务拆分复杂度、开源模型更新频率
- **典型风险**：
  1. **技术风险**：大模型训练资源消耗大，可能影响系统稳定性
     - 应对：实现资源限制和监控机制，优先完成训练队列管理功能
  2. **进度风险**：模型训练和评估功能复杂度高，可能延期
     - 应对：合理拆分任务粒度，设置中间检查点，优先实现核心功能
  3. **集成风险**：前后端功能需紧密配合，可能存在接口不匹配问题
     - 应对：明确接口规范，建立自动化测试，定期进行集成测试
  4. **用户体验风险**：复杂功能可能导致操作流程繁琐
     - 应对：注重UI/UX设计，实现直观的可视化界面，提供操作指引
  5. **本地模型风险**：开源模型兼容性和性能问题
     - 应对：选择稳定版本的模型，实现模型兼容性测试，提供降级方案
- **处理策略**：
  - 数据备份与验证
  - 渐进式架构升级
  - 充分的测试覆盖
  - 开源模型版本锁定与兼容性测试
  - 建立模型更新与验证流程

## 9. 进度更新（持续追加，倒序）

- [PU-2025-09-14-001] 新增T-09本地语言模型对话功能任务，设置为"进行中"状态；优先实现本地模型加载和对话功能。
- [PU-2025-09-13-001] 更新T-02数据库升级任务状态为"进行中"；开始实施数据库从SQLite迁移到PostgreSQL的工作。
- [PU-2025-09-12-001] 更新T-01用户管理系统任务状态为"进行中"；开始实施用户认证与权限管理功能。
- [PU-2025-09-11-001] 更新任务规划，整合对开源模型（千问Qwen和DeepSeek系列小模型）的支持到T-04、T-05、T-06任务中；调整工作量预估和技术重点；增加相关风险管理策略。
- [PU-2025-09-10-001] 初始化MVP到PRD升级任务板，基于PRD文档生成跨前后端任务清单与依赖；设置初始状态（所有任务未开始）。

## 10. 问题记录与处理（Issue Log）

- 暂无问题记录

## 11. 任务快速登记模板

```
### T-XX 任务标题（FE/BE）

- **目标**：
- **前端工作**：
  - 
- **后端工作**：
  - 
- **接口对接**：
  ```
  请求/响应示例
  ```
- **测试用例**：
  1. 
  2. 
- **验收标准**：
  - 
- **依赖**：
- **优先级**：高/中/低
- **预计耗时**：FE Xh，BE Yh
- **状态**：未开始/进行中/已完成/阻塞
- **负责人**：Owner-FE ，Owner-BE 
- **技术重点**：
  - 前端：
  - 后端：
```